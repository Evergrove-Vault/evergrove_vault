---
aliases:
  - Model Content Protocol
tags:
  - evergrow/sprout
  - technology
---
documentation::  https://modelcontextprotocol.io/docs/learn/architecture
# Обзор
MCP - протокол взаимодействия llm и любого сервиса в привычном нам понимании. Его основная задача заключается в том, чтобы предоставить стандартизированный подход к взаимодействию llm с сервисами. [[MOC Микросервисное взаимодействие]]

## Основные компоненты 
**MCP Host** - приложение, которое использует **MCP Client** для работы с внешними сервисами. Чаще всего либо интерфейсы чатов или конечные потребители сервисов 
**MCP Client** - клиент, который организует общение между host и server. Отвечает за обмен мета информацией и поддержание соединения 
**MCP Server** - исходный сервис, чью функциональность хочет получить host. 

![[Pasted image 20250821203654.png|Схема взаимодействия]]

### Особенности взаимодействия 
- на каждый server создается свой клиент (модель общения one2one)
- основной формат общения JSON-RPC 2.0
- поддерживает два транспорта:
	- **Stdio transport** для взаимодействия когда все компоненты находятся на одной машине 
	- **Streamable HTTP transport** для общения через интернет. Поддерживает все стандартные механизмы HTTP. Рекомендуется аутентификация через OAuth
- есть механизм жизненного цикла, который позволяет синхронизировать метаинформацию сервера и клиента

## Возможности 
MCP поддерживает следующие примитивы:
- Инструменты: исполняемые функции, которые приложения ИИ могут вызывать для выполнения действий (например, операции с файлами, вызовы API, запросы к базе данных).
- Ресурсы: источники данных, которые предоставляют контекстную информацию приложениям ИИ (например, содержимое файлов, записи базы данных, ответы API).
- Подсказки: повторно используемые шаблоны, которые помогают структурировать взаимодействие с языковыми моделями (например, системные подсказки, примеры с небольшим количеством попыток).

Для серверов доступен вызов следующих возможностей хоста:
- Выборка: позволяет серверам запрашивать завершение языковой модели у приложения искусственного интеллекта клиента. Это полезно, когда авторы серверов хотят получить доступ к языковой модели, но при этом остаться независимыми от модели и не включать SDK языковой модели в свой сервер MCP. Они могут использовать метод выборки/завершения, чтобы запросить завершение языковой модели у приложения искусственного интеллекта клиента.
- Выявление: позволяет серверам запрашивать дополнительную информацию у пользователей. Это полезно, когда авторы серверов хотят получить больше информации от пользователя или запросить подтверждение действия. Они могут использовать метод elicitation/request для запроса дополнительной информации у пользователя.
- Ведение журнала: позволяет серверам отправлять сообщения журнала клиентам для отладки и мониторинга.

Кроме того есть механизм нотификаций, который позволяет сообщать серверу об изменениях на нем без необходимости ответа на данное действие. Это помогает наладить обратную связь с клиентом и уведомлять его о смени API или ограничении тех или иных возможностей. 

# Полезные материалы